<ame="delivery_method" required>
  <option value="">Choose</option>
  <option value="pickup">Pickup</option>
  <option value="delivery">Delivery (+£2)</option>
</select>

<!-- PICKUP ADDRESS -->
<div id="pickupBox" class="hidden">
  <label>Pickup address</label>
  <input type="text" value="29 Bramham Gardens" readonly>
</div>

<!-- DELIVERY DETAILS -->
<div id="deliveryBox" class="hidden">
  <label>Delivery address</label>
  <input type="text" name="delivery_address">

  <label>Phone number</label>
  <input type="tel" name="phone">
</div>

<!-- ALLERGEN CONFIRMATION -->
<label>
  <input type="checkbox" required>
  I understand this product contains wheat (gluten) and soy and may contain milk, eggs, and nuts.
</label>

<!-- TOTAL -->
<div class="total">
  Total: £<span id="total">0.00</span>
</div>

<input type="hidden" name="total_price" id="totalInput">

<button type="submit">Submit Order</button>

</form>

<script>
let qty = 1;

function changeQty(n) {
  qty = Math.max(1, qty + n);
  document.getElementById("qty").value = qty;
  calculateTotal();
}

function calculateTotal() {
  const pack = document.getElementById("pack");
  const option = pack.options[pack.selectedIndex];
  if (!option || !option.dataset.price) return;

  let price = parseFloat(option.dataset.price);
  let total = price * qty;

  if (document.getElementById("delivery").value === "delivery") {
    total += 2;
  }

  document.getElementById("total").textContent = total.toFixed(2);
  document.getElementById("totalInput").value = "£" + total.toFixed(2);
}

document.getElementById("pack").addEventListener("change", calculateTotal);

document.getElementById("delivery").addEventListener("change", function () {
  document.getElementById("pickupBox").classList.add("hidden");
  document.getElementById("deliveryBox").classList.add("hidden");

  if (this.value === "pickup") {
    document.getElementById("pickupBox").classList.remove("hidden");
  }

  if (this.value === "delivery") {
    document.getElementById("deliveryBox").classList.remove("hidden");
  }

  calculateTotal();
});
</script>

</body>
</html>
